---
import Layout from "../layouts/Layout.astro";
import Contactform from "../components/Contactform.astro";
---

<Layout>
  <!-- HERO SECTION -->
  <section class="bg-gray-300 text-gray-900 font-montserrat py-20">
    <div class="container mx-auto px-4">
      <div class="flex flex-col lg:flex-row justify-between items-start gap-16">
        <!-- Text -->
        <div class="lg:w-2/3 space-y-4">
          <h1
            class="text-4xl lg:text-5xl font-bebas leading-tight tracking-tight"
          >
            Laadukasta maalaus- ja pintakäsittelypalvelua jo vuodesta 2002
          </h1>
          <div class="space-y-3 text-base leading-relaxed">
            <p>
              Olemme kotimainen, vuonna 2002 perustettu maalaus- ja
              pintakäsittelyalan ammattiliike. Toimimme ylpeästi suomalaisena
              yrityksenä, tarjoten asiakkaillemme kestävää ja laadukasta
              työnjälkeä niin remontti- kuin maalaustöissäkin aina luotettavasti
              ja ammattitaidolla.
            </p>
            <p>
              Toimialueemme kattaa pääkaupunkiseudun ja Päijät-Hämeen, mutta
              palvelemme joustavasti myös muualla Etelä-Suomessa asiakkaiden
              tarpeiden mukaan.
            </p>
            <p>
              Palveluihimme kuuluvat mm. kattojen pesu ja pinnoitus, sisä- ja
              ulkomaalaukset, julkisivuremontit, lattia- ja seinäpinnat sekä
              laajemmat asuntoremontit.
            </p>
            <p>
              Käytämme laadukkaita materiaaleja ja hyödynnämme kotimaista
              osaamista kokeneella tiimillämme varmistamme työnjäljen, johon
              asiakkaamme voivat luottaa.
            </p>
          </div>
        </div>

        <!-- Trust badges -->
        <div
          class="lg:w-1/3 hidden sm:flex flex-col items-end justify-center gap-4 self-end"
        >
          <div class="flex gap-4 items-center">
            <img
              src="/images/trust1.jpeg"
              alt="AA-luokitus"
              class="h-32 w-48 object-contain"
            />
            <img
              src="/images/trust2.jpeg"
              alt="Suomalaista palvelua"
              class="h-32 w-48 object-contain"
            />
            <img
              src="/images/trust3.jpeg"
              alt="Jäsenyritys"
              class="h-32 w-48 object-contain"
            />
          </div>
          <div class="flex gap-4 items-center">
            <img
              src="/images/trust4.jpeg"
              alt="Platinasertifikaatti"
              class="h-32 w-48 object-contain"
            />
            <img
              src="/images/trust5.jpeg"
              alt="Luotettava kumppani"
              class="h-32 w-48 object-contain"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FLOATING CTA -->
  <section class="relative w-full min-h-[650px] bg-gray-100">
    <img
      src="/images/newbackground.jpeg"
      alt="Repton työmaa"
      class="w-full h-full object-cover absolute inset-0"
    />
    <div class="absolute inset-0 flex justify-center items-center px-4">
      <div
        class="bg-white/10 backdrop-blur-lg rounded-2xl p-12 shadow-2xl text-center space-y-6 max-w-lg w-full border border-white/10"
      >
        <a
          href="#contact-scroll"
          class="block w-full bg-green-800 hover:bg-green-900 text-white font-bold text-xl py-4 rounded-full transition"
        >
          Pyydä tarjous
        </a>
        <img src="/images/logo.png" alt="Repton Oy logo" class="mx-auto h-14" />
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS -->
  <section class="bg-gray-300 text-gray-900 font-montserrat py-20">
    <div class="container mx-auto px-4 text-center space-y-12">
      <h2 class="text-3xl md:text-5xl font-bebas tracking-wide uppercase">
        Luottamus Puolestamme
      </h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <div
          class="bg-white p-12 rounded-xl shadow-lg text-base italic min-h-[200px]"
        >
          "Hienosti hoidettu urakka..."<br /><strong>– Anni</strong>
        </div>
        <div
          class="bg-white p-12 rounded-xl shadow-lg text-base italic min-h-[200px]"
        >
          "Loistavaa työtä!"<br /><strong>– Ilkka</strong>
        </div>
        <div
          class="bg-white p-12 rounded-xl shadow-lg text-base italic min-h-[200px]"
        >
          "Kiitos paljon hyvin hoidetusta urakasta!"<br /><strong
            >– Seppo</strong
          >
        </div>
        <div
          class="bg-white p-12 rounded-xl shadow-lg text-base italic min-h-[200px]"
        >
          "Olipa projekti ja nopeat miehet asialla!"<br /><strong
            >– Matti</strong
          >
        </div>
      </div>
    </div>
  </section>

  <!-- GALLERY SECTION (one heading only) -->
  <section class="bg-gray-300 py-20 overflow-hidden font-montserrat">
    <div class="max-w-[2000px] mx-auto px-4">
      <h2
        class="text-center text-3xl md:text-5xl font-bebas tracking-wide uppercase mb-12 text-gray-900"
      >
        Töitämme
      </h2>

      <!-- HORIZONTAL SCROLLABLE IMAGE ROW -->
      <div class="overflow-x-auto scroll-smooth">
        <div class="flex gap-6 whitespace-nowrap">
          <!-- Julkisivut -->
          <img
            src="/images/julk1.jpeg"
            alt="Julkisivumaalaus – kerrostalon ulkoseinä maalattuna"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />
          <img
            src="/images/julk2.jpeg"
            alt="Julkisivumaalaus – valkoinen puutalo huoltomaalauksen jälkeen"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />
          <img
            src="/images/julk6.jpeg"
            alt="Julkisivumaalaus – moderni valkoinen puutalo"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />

          <!-- Kattotyöt -->
          <img
            src="/images/kat2.jpeg"
            alt="Kattotyöt – vaalea harmaa peltikatto savupiipuilla"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />
          <img
            src="/images/kat6.jpeg"
            alt="Kattotyöt – suuri punainen peltikatto"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />
          <img
            src="/images/kat7.jpeg"
            alt="Kattotyöt – historiallinen kirkko kupolikattoineen"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />
          <img
            src="/images/kat20.jpg"
            alt="Kattotyöt – vaalea peltikatto kirkasta taivasta vasten"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />

          <!-- Porras -->
          <img
            src="/images/sis5.jpeg"
            alt="Porrasremontti – sisäänkäynnin uudet portaat ja kaiteet"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />
          <img
            src="/images/sis7.jpeg"
            alt="Porrasremontti – porraskäytävä maalattuna"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />

          <!-- Sisäremontit -->
          <img
            src="/images/rem4.jpeg"
            alt="Sisäremontti – moderni keittiö saarekkeella"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />
          <img
            src="/images/rem5.jpeg"
            alt="Sisäremontti – historiallinen porrashuone yksityiskohtaisilla kaiteilla"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />
          <img
            src="/images/rem7.jpeg"
            alt="Sisäremontti – perinteinen suomalainen sauna"
            class="gallery-image w-[320px] h-[320px] object-cover rounded shadow-md flex-shrink-0 cursor-pointer"
          />
        </div>
      </div>
    </div>
  </section>

  <!-- FULLSCREEN MODAL (only used on phones) -->
  <div
    id="modal"
    class="fixed inset-0 bg-black bg-opacity-90 z-50 hidden justify-center items-center"
  >
    <button
      id="closeModal"
      class="absolute top-4 right-4 text-white text-4xl font-bold hover:text-gray-300 transition"
      aria-label="Sulje">✕</button
    >

    <!-- Prev / Next (mobile only) -->
    <button
      id="prevImage"
      class="absolute left-4 top-1/2 -translate-y-1/2 text-white text-4xl font-bold px-2 hover:text-gray-300 transition md:hidden"
      aria-label="Edellinen kuva">‹</button
    >
    <button
      id="nextImage"
      class="absolute right-4 top-1/2 -translate-y-1/2 text-white text-4xl font-bold px-2 hover:text-gray-300 transition md:hidden"
      aria-label="Seuraava kuva">›</button
    >

    <img
      id="modalImage"
      src=""
      alt="Näyttökuva"
      class="max-w-full max-h-full object-contain rounded-lg shadow-lg"
    />
  </div>

  <!-- MODAL SCRIPT -->
  <script type="module">
    const modal = document.getElementById("modal");
    const modalImage = document.getElementById("modalImage");
    const closeModal = document.getElementById("closeModal");
    const prevBtn = document.getElementById("prevImage");
    const nextBtn = document.getElementById("nextImage");
    const images = [...document.querySelectorAll(".gallery-image")];
    let currentIndex = 0;

    const isMobile = () => window.matchMedia("(max-width: 768px)").matches;

    function openModalIndex(index) {
      if (!isMobile()) return;
      currentIndex = index;
      modalImage.src = images[currentIndex].src;
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    }

    // for inline onclick (kept), and direct clicks
    window.openModal = (src) => {
      if (!isMobile()) return;
      const i = images.findIndex((img) => img.getAttribute("src") === src);
      openModalIndex(i >= 0 ? i : 0);
    };
    images.forEach((img, i) =>
      img.addEventListener("click", () => openModalIndex(i)),
    );

    closeModal.addEventListener("click", () => {
      modal.classList.add("hidden");
      modalImage.src = "";
    });

    prevBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      modalImage.src = images[currentIndex].src;
    });
    nextBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      currentIndex = (currentIndex + 1) % images.length;
      modalImage.src = images[currentIndex].src;
    });
  </script>

  <!-- CONTACT FORM -->
  <Contactform />
</Layout>
